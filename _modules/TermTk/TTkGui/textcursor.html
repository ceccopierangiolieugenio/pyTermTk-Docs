
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TermTk.TTkGui.textcursor &#8212; pyTermTk ..-a
 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../../_static/theme_overrides.css?v=370fe9cb" />
    <link rel="stylesheet" type="text/css" href="../../../_static/ttk.css?v=a0d45580" />
  
  <!-- So that users can add custom icons -->
  <script src="../../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../../_static/documentation_options.js?v=984eaf5c"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/TermTk/TTkGui/textcursor';</script>
    <link rel="icon" href="https://ceccopierangiolieugenio.github.io/pyTermTk/sandbox/www/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">pyTermTk ..-a
 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../../../index.html">
                    Welcome to pyTermTkâ€™s documentation!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/000-examples.html">pyTermTk - &lt; <strong>the Examples</strong> &gt;</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/001-helloworld.html">pyTermTk - Hello World</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/002-layout.html">pyTermTk - Layouts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/003-signalslots.html">pyTermTk - Signal &amp; Slots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/004-logging.html">pyTermTk - Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/005-calculator.html">pyTermTk - Your first Calculator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/ttkDesigner/textEdit/README.html">ttkDesigner - Your first TextEditor</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Features</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../info/features/index.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../info/features/crosscompatible.html">Cross Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../info/features/widgets.html">Widgets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Dev</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../../info/installing.html">Installation</a></li>

<li class="toctree-l1"><a class="reference internal" href="../../../info/debug.html">Debug</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../info/resources/index.html">Resources</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../info/resources/clipboard.html">Clipboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../info/resources/modal.html">Overlay Widgets (Windows)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../info/resources/dragdrop.html">Drag and Drop</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../info/resources/experimental.html">Experimental Features</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkAbstract.html">TermTk.TTkAbstract</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkAbstract.TTkAbstractItemModel.html">TTkAbstractItemModel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkAbstract.TTkAbstractScrollArea.html">TTkAbstractScrollArea</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkAbstract.TTkAbstractScrollView.html">TTkAbstractScrollView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkAbstract.TTkAbstractScrollViewGridLayout.html">TTkAbstractScrollViewGridLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkAbstract.TTkAbstractScrollViewInterface.html">TTkAbstractScrollViewInterface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkAbstract.TTkAbstractTableModel.html">TTkAbstractTableModel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkAbstract.TTkModelIndex.html">TTkModelIndex</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.html">TermTk.TTkCore</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTk.html">TTk</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkAlternateColor.html">TTkAlternateColor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkCanvas.html">TTkCanvas</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkCfg.html">TTkCfg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkColor.html">TTkColor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkColorGradient.html">TTkColorGradient</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkColorModifier.html">TTkColorModifier</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkConstant.html">TTkConstant</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkEasingCurve.html">TTkEasingCurve</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkFileBuffer.html">TTkFileBuffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkGlbl.html">TTkGlbl</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkHelper.html">TTkHelper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkK.html">TTkK</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkLinearGradient.html">TTkLinearGradient</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkLog.html">TTkLog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkPropertyAnimation.html">TTkPropertyAnimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkShortcut.html">TTkShortcut</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkString.html">TTkString</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkTimer.html">TTkTimer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkUtil.html">TTkUtil</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.pyTTkSignal.html">pyTTkSignal</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkTerm.html">TermTk.TTkCore.TTkTerm</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkTerm.TTkInput.html">TTkInput</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkTerm.TTkKeyEvent.html">TTkKeyEvent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkTerm.TTkMouseEvent.html">TTkMouseEvent</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkCore.TTkTerm.TTkTerm.html">TTkTerm</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkGui.html">TermTk.TTkGui</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkGui.TTkClipboard.html">TTkClipboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkGui.TTkDnD.html">TTkDnD</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkGui.TTkDnDEvent.html">TTkDnDEvent</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkGui.TTkDrag.html">TTkDrag</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html">TTkTextCursor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkGui.TTkTextDocument.html">TTkTextDocument</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkGui.TTkTextWrap.html">TTkTextWrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkGui.TTkToolTip.html">TTkToolTip</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkGui.TextDocumentHighlight.html">TextDocumentHighlight</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkLayouts.html">TermTk.TTkLayouts</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkLayouts.TTkGridLayout.html">TTkGridLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkLayouts.TTkHBoxLayout.html">TTkHBoxLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkLayouts.TTkLayout.html">TTkLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkLayouts.TTkLayoutItem.html">TTkLayoutItem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkLayouts.TTkVBoxLayout.html">TTkVBoxLayout</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkTemplates.html">TermTk.TTkTemplates</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkTemplates.TDragEvents.html">TDragEvents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkTemplates.TKeyEvents.html">TKeyEvents</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkTemplates.TMouseEvents.html">TMouseEvents</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkTestWidgets.html">TermTk.TTkTestWidgets</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkTestWidgets.TTkKeyPressView.html">TTkKeyPressView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkTestWidgets.TTkLogViewer.html">TTkLogViewer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkTestWidgets.TTkTestAbstractScrollWidget.html">TTkTestAbstractScrollWidget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkTestWidgets.TTkTestWidget.html">TTkTestWidget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkTestWidgets.TTkTestWidgetSizes.html">TTkTestWidgetSizes</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkUiTools.html">TermTk.TTkUiTools</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkUiTools.TTkUiLoader.html">TTkUiLoader</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.html">TermTk.TTkWidgets</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkAbout.html">TTkAbout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkAbstractListItem.html">TTkAbstractListItem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkAppTemplate.html">TTkAppTemplate</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkButton.html">TTkButton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkCheckbox.html">TTkCheckbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkComboBox.html">TTkComboBox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkContainer.html">TTkContainer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkFrame.html">TTkFrame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkGraph.html">TTkGraph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkImage.html">TTkImage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkKodeTab.html">TTkKodeTab</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkLabel.html">TTkLabel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkLineEdit.html">TTkLineEdit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkList.html">TTkList</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkListWidget.html">TTkListWidget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkMenu.html">TTkMenu</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkMenuBarButton.html">TTkMenuBarButton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkMenuBarLayout.html">TTkMenuBarLayout</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkMenuButton.html">TTkMenuButton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPadding.html">TTkPadding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkRadioButton.html">TTkRadioButton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkResizableFrame.html">TTkResizableFrame</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkScrollArea.html">TTkScrollArea</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkScrollBar.html">TTkScrollBar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkSlider.html">TTkSlider</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkSpacer.html">TTkSpacer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkSpinBox.html">TTkSpinBox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkSplitter.html">TTkSplitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTabBar.html">TTkTabBar</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTabButton.html">TTkTabButton</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTabWidget.html">TTkTabWidget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTextEdit.html">TTkTextEdit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTextEditView.html">TTkTextEditView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkWidget.html">TTkWidget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkWindow.html">TTkWindow</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.Fancy.html">TermTk.TTkWidgets.Fancy</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.Fancy.TTkFancyProgressBar.html">TTkFancyProgressBar</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.Fancy.TTkFancyTable.html">TTkFancyTable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.Fancy.TTkFancyTableView.html">TTkFancyTableView</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.Fancy.TTkFancyTree.html">TTkFancyTree</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.Fancy.TTkFancyTreeView.html">TTkFancyTreeView</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.Fancy.TTkFancyTreeWidget.html">TTkFancyTreeWidget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.Fancy.TTkFancyTreeWidgetItem.html">TTkFancyTreeWidgetItem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.Fancy.TTkLookAndFeelFPBar.html">TTkLookAndFeelFPBar</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.html">TermTk.TTkWidgets.TTkModelView</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkFileTree.html">TTkFileTree</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkFileTreeWidget.html">TTkFileTreeWidget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkFileTreeWidgetItem.html">TTkFileTreeWidgetItem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkHeaderView.html">TTkHeaderView</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTable.html">TTkTable</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTableModelCSV.html">TTkTableModelCSV</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTableModelList.html">TTkTableModelList</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTableModelSQLite3.html">TTkTableModelSQLite3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTableWidget.html">TTkTableWidget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTree.html">TTkTree</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTreeWidget.html">TTkTreeWidget</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTreeWidgetItem.html">TTkTreeWidgetItem</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.html">TermTk.TTkWidgets.TTkPickers</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkColorButtonPicker.html">TTkColorButtonPicker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkColorDialogPicker.html">TTkColorDialogPicker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkFileButtonPicker.html">TTkFileButtonPicker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkFileDialogPicker.html">TTkFileDialogPicker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkMessageBox.html">TTkMessageBox</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkTextDialogPicker.html">TTkTextDialogPicker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkTextPicker.html">TTkTextPicker</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTerminal.html">TermTk.TTkWidgets.TTkTerminal</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTerminal.TTkTerminal.html">TTkTerminal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTerminal.TTkTerminalHelper.html">TTkTerminalHelper</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTerminal.TTkTerminalView.html">TTkTerminalView</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.html">TermTk.TTkWidgets.TTkModelView</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkFileTree.html">TTkFileTree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkFileTreeWidget.html">TTkFileTreeWidget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkFileTreeWidgetItem.html">TTkFileTreeWidgetItem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkHeaderView.html">TTkHeaderView</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTable.html">TTkTable</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTableModelCSV.html">TTkTableModelCSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTableModelList.html">TTkTableModelList</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTableModelSQLite3.html">TTkTableModelSQLite3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTableWidget.html">TTkTableWidget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTree.html">TTkTree</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTreeWidget.html">TTkTreeWidget</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkModelView.TTkTreeWidgetItem.html">TTkTreeWidgetItem</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.html">TermTk.TTkWidgets.TTkPickers</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkColorButtonPicker.html">TTkColorButtonPicker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkColorDialogPicker.html">TTkColorDialogPicker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkFileButtonPicker.html">TTkFileButtonPicker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkFileDialogPicker.html">TTkFileDialogPicker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkMessageBox.html">TTkMessageBox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkTextDialogPicker.html">TTkTextDialogPicker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkPickers.TTkTextPicker.html">TTkTextPicker</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTerminal.html">TermTk.TTkWidgets.TTkTerminal</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTerminal.TTkTerminal.html">TTkTerminal</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTerminal.TTkTerminalHelper.html">TTkTerminalHelper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_autosummary/TermTk.TTkWidgets.TTkTerminal.TTkTerminalView.html">TTkTerminalView</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">



<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1></h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <h1>Source code for TermTk.TTkGui.textcursor</h1><div class="highlight"><pre>
<span></span><span class="c1"># MIT License</span>
<span class="c1">#</span>
<span class="c1"># Copyright (c) 2022 Eugenio Parodi &lt;ceccopierangiolieugenio AT googlemail DOT com&gt;</span>
<span class="c1">#</span>
<span class="c1"># Permission is hereby granted, free of charge, to any person obtaining a copy</span>
<span class="c1"># of this software and associated documentation files (the &quot;Software&quot;), to deal</span>
<span class="c1"># in the Software without restriction, including without limitation the rights</span>
<span class="c1"># to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span>
<span class="c1"># copies of the Software, and to permit persons to whom the Software is</span>
<span class="c1"># furnished to do so, subject to the following conditions:</span>
<span class="c1">#</span>
<span class="c1"># The above copyright notice and this permission notice shall be included in all</span>
<span class="c1"># copies or substantial portions of the Software.</span>
<span class="c1">#</span>
<span class="c1"># THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="c1"># IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="c1"># FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="c1"># AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="c1"># LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span>
<span class="c1"># OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span>
<span class="c1"># SOFTWARE.</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;TTkTextCursor&#39;</span><span class="p">]</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Self</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">class</span> <span class="nc">Self</span><span class="p">():</span> <span class="k">pass</span>

<span class="kn">from</span> <span class="nn">TermTk.TTkCore.log</span> <span class="kn">import</span> <span class="n">TTkLog</span>
<span class="kn">from</span> <span class="nn">TermTk.TTkCore.color</span> <span class="kn">import</span> <span class="n">TTkColor</span>
<span class="kn">from</span> <span class="nn">TermTk.TTkCore.string</span> <span class="kn">import</span> <span class="n">TTkString</span>
<span class="kn">from</span> <span class="nn">TermTk.TTkGui.textwrap1</span> <span class="kn">import</span> <span class="n">TTkTextWrap</span>
<span class="kn">from</span> <span class="nn">TermTk.TTkGui.textdocument</span> <span class="kn">import</span> <span class="n">TTkTextDocument</span>


<span class="k">class</span> <span class="nc">_CP</span><span class="p">():</span>
    <span class="c1"># The Cursor Position is based on the</span>
    <span class="c1"># document data structure, where the</span>
    <span class="c1"># the entire document is divided in lines</span>
    <span class="c1"># instead of considering it a massive string</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;line&#39;</span><span class="p">,</span><span class="s1">&#39;pos&#39;</span><span class="p">)</span>
    <span class="n">line</span><span class="p">:</span><span class="nb">int</span>
    <span class="n">pos</span><span class="p">:</span><span class="nb">int</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">p</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">l</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_CP</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">p</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pos</span>  <span class="o">=</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="n">l</span>
    <span class="k">def</span> <span class="nf">toNum</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">pos</span> <span class="o">|</span> <span class="bp">self</span><span class="o">.</span><span class="n">line</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span>

<span class="k">class</span> <span class="nc">_Prop</span><span class="p">():</span>
    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;anchor&#39;</span><span class="p">,</span> <span class="s1">&#39;position&#39;</span><span class="p">)</span>
    <span class="n">anchor</span><span class="p">:</span><span class="n">_CP</span>
    <span class="n">position</span><span class="p">:</span><span class="n">_CP</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">anchor</span><span class="p">:</span><span class="n">_CP</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span><span class="n">_CP</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="p">:</span><span class="n">_CP</span> <span class="o">=</span> <span class="n">anchor</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">:</span><span class="n">_CP</span> <span class="o">=</span> <span class="n">position</span>

    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">_Prop</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">copy</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">copy</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">selectionStart</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_CP</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">toNum</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>

    <span class="k">def</span> <span class="nf">selectionEnd</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_CP</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">toNum</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span>

    <span class="k">def</span> <span class="nf">hasSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">line</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">pos</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>

<div class="viewcode-block" id="TTkTextCursor">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor">[docs]</a>
<span class="k">class</span> <span class="nc">TTkTextCursor</span><span class="p">():</span>
    <span class="k">class</span> <span class="nc">MoveMode</span><span class="p">():</span>
        <span class="n">MoveAnchor</span> <span class="o">=</span> <span class="mh">0x00</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Moves the anchor to the same position as the cursor itself.&#39;&#39;&#39;</span>
        <span class="n">KeepAnchor</span> <span class="o">=</span> <span class="mh">0x01</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Keeps the anchor where it is.&#39;&#39;&#39;</span>
    <span class="n">MoveAnchor</span> <span class="o">=</span> <span class="n">MoveMode</span><span class="o">.</span><span class="n">MoveAnchor</span>
    <span class="n">KeepAnchor</span> <span class="o">=</span> <span class="n">MoveMode</span><span class="o">.</span><span class="n">KeepAnchor</span>

    <span class="k">class</span> <span class="nc">SelectionType</span><span class="p">():</span>
        <span class="n">Document</span>         <span class="o">=</span> <span class="mh">0x03</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Selects the entire document.&#39;&#39;&#39;</span>
        <span class="n">BlockUnderCursor</span> <span class="o">=</span> <span class="mh">0x02</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Selects the block of text under the cursor.&#39;&#39;&#39;</span>
        <span class="n">LineUnderCursor</span>  <span class="o">=</span> <span class="mh">0x01</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Selects the line of text under the cursor.&#39;&#39;&#39;</span>
        <span class="n">WordUnderCursor</span>  <span class="o">=</span> <span class="mh">0x00</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Selects the word under the cursor. If the cursor is not positioned within a string of selectable characters, no text is selected.&#39;&#39;&#39;</span>
    <span class="n">Document</span>         <span class="o">=</span> <span class="n">SelectionType</span><span class="o">.</span><span class="n">Document</span>
    <span class="n">BlockUnderCursor</span> <span class="o">=</span> <span class="n">SelectionType</span><span class="o">.</span><span class="n">BlockUnderCursor</span>
    <span class="n">LineUnderCursor</span>  <span class="o">=</span> <span class="n">SelectionType</span><span class="o">.</span><span class="n">LineUnderCursor</span>
    <span class="n">WordUnderCursor</span>  <span class="o">=</span> <span class="n">SelectionType</span><span class="o">.</span><span class="n">WordUnderCursor</span>

    <span class="k">class</span> <span class="nc">MoveOperation</span><span class="p">():</span>
        <span class="n">NoMove</span>            <span class="o">=</span> <span class="mi">0</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Keep the cursor where it is&#39;&#39;&#39;</span>
        <span class="n">Start</span>             <span class="o">=</span> <span class="mi">1</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the start of the document.&#39;&#39;&#39;</span>
        <span class="n">StartOfLine</span>       <span class="o">=</span> <span class="mi">3</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the start of the current line.&#39;&#39;&#39;</span>
        <span class="n">StartOfBlock</span>      <span class="o">=</span> <span class="mi">4</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the start of the current block.&#39;&#39;&#39;</span>
        <span class="n">StartOfWord</span>       <span class="o">=</span> <span class="mi">5</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the start of the current word.&#39;&#39;&#39;</span>
        <span class="n">PreviousBlock</span>     <span class="o">=</span> <span class="mi">6</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the start of the previous block.&#39;&#39;&#39;</span>
        <span class="n">PreviousCharacter</span> <span class="o">=</span> <span class="mi">7</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the previous character.&#39;&#39;&#39;</span>
        <span class="n">PreviousWord</span>      <span class="o">=</span> <span class="mi">8</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the beginning of the previous word.&#39;&#39;&#39;</span>
        <span class="n">Up</span>                <span class="o">=</span> <span class="mi">2</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move up one line.&#39;&#39;&#39;</span>
        <span class="n">Left</span>              <span class="o">=</span> <span class="mi">9</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move left one character.&#39;&#39;&#39;</span>
        <span class="n">WordLeft</span>          <span class="o">=</span> <span class="mi">10</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move left one word.&#39;&#39;&#39;</span>
        <span class="n">End</span>               <span class="o">=</span> <span class="mi">11</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the end of the document.&#39;&#39;&#39;</span>
        <span class="n">EndOfLine</span>         <span class="o">=</span> <span class="mi">13</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the end of the current line.&#39;&#39;&#39;</span>
        <span class="n">EndOfWord</span>         <span class="o">=</span> <span class="mi">14</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the end of the current word.&#39;&#39;&#39;</span>
        <span class="n">EndOfBlock</span>        <span class="o">=</span> <span class="mi">15</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the end of the current block.&#39;&#39;&#39;</span>
        <span class="n">NextBlock</span>         <span class="o">=</span> <span class="mi">16</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the beginning of the next block.&#39;&#39;&#39;</span>
        <span class="n">NextCharacter</span>     <span class="o">=</span> <span class="mi">17</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the next character.&#39;&#39;&#39;</span>
        <span class="n">NextWord</span>          <span class="o">=</span> <span class="mi">18</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the next word.&#39;&#39;&#39;</span>
        <span class="n">Down</span>              <span class="o">=</span> <span class="mi">12</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move down one line.&#39;&#39;&#39;</span>
        <span class="n">Right</span>             <span class="o">=</span> <span class="mi">19</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move right one character.&#39;&#39;&#39;</span>
        <span class="n">WordRight</span>         <span class="o">=</span> <span class="mi">20</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move right one word.&#39;&#39;&#39;</span>
        <span class="n">NextCell</span>          <span class="o">=</span> <span class="mi">21</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the beginning of the next table cell inside the current table. If the current cell is the last cell in the row, the cursor will move to the first cell in the next row.&#39;&#39;&#39;</span>
        <span class="n">PreviousCell</span>      <span class="o">=</span> <span class="mi">22</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the beginning of the previous table cell inside the current table. If the current cell is the first cell in the row, the cursor will move to the last cell in the previous row.&#39;&#39;&#39;</span>
        <span class="n">NextRow</span>           <span class="o">=</span> <span class="mi">23</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the first new cell of the next row in the current table.&#39;&#39;&#39;</span>
        <span class="n">PreviousRow</span>       <span class="o">=</span> <span class="mi">24</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;Move to the last cell of the previous row in the current table.&#39;&#39;&#39;</span>
    <span class="n">NoMove</span>            <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">NoMove</span>
    <span class="n">Start</span>             <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">Start</span>
    <span class="n">StartOfLine</span>       <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">StartOfLine</span>
    <span class="n">StartOfBlock</span>      <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">StartOfBlock</span>
    <span class="n">StartOfWord</span>       <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">StartOfWord</span>
    <span class="n">PreviousBlock</span>     <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">PreviousBlock</span>
    <span class="n">PreviousCharacter</span> <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">PreviousCharacter</span>
    <span class="n">PreviousWord</span>      <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">PreviousWord</span>
    <span class="n">Up</span>                <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">Up</span>
    <span class="n">Left</span>              <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">Left</span>
    <span class="n">WordLeft</span>          <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">WordLeft</span>
    <span class="n">End</span>               <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">End</span>
    <span class="n">EndOfLine</span>         <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">EndOfLine</span>
    <span class="n">EndOfWord</span>         <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">EndOfWord</span>
    <span class="n">EndOfBlock</span>        <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">EndOfBlock</span>
    <span class="n">NextBlock</span>         <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">NextBlock</span>
    <span class="n">NextCharacter</span>     <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">NextCharacter</span>
    <span class="n">NextWord</span>          <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">NextWord</span>
    <span class="n">Down</span>              <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">Down</span>
    <span class="n">Right</span>             <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">Right</span>
    <span class="n">WordRight</span>         <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">WordRight</span>
    <span class="n">NextCell</span>          <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">NextCell</span>
    <span class="n">PreviousCell</span>      <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">PreviousCell</span>
    <span class="n">NextRow</span>           <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">NextRow</span>
    <span class="n">PreviousRow</span>       <span class="o">=</span> <span class="n">MoveOperation</span><span class="o">.</span><span class="n">PreviousRow</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;_document&#39;</span><span class="p">,</span> <span class="s1">&#39;_properties&#39;</span><span class="p">,</span> <span class="s1">&#39;_cID&#39;</span><span class="p">,</span> <span class="s1">&#39;_color&#39;</span><span class="p">,</span> <span class="s1">&#39;_autoChanged&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document</span><span class="p">:</span><span class="n">TTkTextDocument</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cID</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoChanged</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="p">[</span><span class="n">_Prop</span><span class="p">(</span><span class="n">_CP</span><span class="p">(),</span><span class="n">_CP</span><span class="p">())]</span>
        <span class="k">if</span> <span class="n">document</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="n">document</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">contentsChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_documentContentChanged</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_documentContentChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoChanged</span><span class="p">:</span> <span class="k">return</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearCursors</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clearSelection</span><span class="p">()</span>

<div class="viewcode-block" id="TTkTextCursor.copy">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.copy">[docs]</a>
    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Self</span><span class="p">:</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">TTkTextCursor</span><span class="p">()</span>
        <span class="n">ret</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span>
        <span class="n">ret</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">]</span>
        <span class="n">ret</span><span class="o">.</span><span class="n">_cID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cID</span>
        <span class="n">ret</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_color</span>
        <span class="n">ret</span><span class="o">.</span><span class="n">_autoChanged</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_autoChanged</span>
        <span class="k">return</span> <span class="n">ret</span></div>


<div class="viewcode-block" id="TTkTextCursor.restore">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.restore">[docs]</a>
    <span class="k">def</span> <span class="nf">restore</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cursor</span><span class="p">:</span><span class="n">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">_document</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">cursor</span><span class="o">.</span><span class="n">_properties</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cID</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">_cID</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">_color</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoChanged</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">_autoChanged</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">cursorPositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="TTkTextCursor.setColor">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.setColor">[docs]</a>
    <span class="k">def</span> <span class="nf">setColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span><span class="n">TTkColor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="n">color</span></div>


<div class="viewcode-block" id="TTkTextCursor.clearColor">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.clearColor">[docs]</a>
    <span class="k">def</span> <span class="nf">clearColor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="o">=</span> <span class="kc">None</span></div>


<div class="viewcode-block" id="TTkTextCursor.anchor">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.anchor">[docs]</a>
    <span class="k">def</span> <span class="nf">anchor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_CP</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cID</span><span class="p">]</span><span class="o">.</span><span class="n">anchor</span></div>


<div class="viewcode-block" id="TTkTextCursor.position">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.position">[docs]</a>
    <span class="k">def</span> <span class="nf">position</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_CP</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cID</span><span class="p">]</span><span class="o">.</span><span class="n">position</span></div>


<div class="viewcode-block" id="TTkTextCursor.cursors">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.cursors">[docs]</a>
    <span class="k">def</span> <span class="nf">cursors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">_CP</span><span class="p">]:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span></div>


<div class="viewcode-block" id="TTkTextCursor.addCursor">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.addCursor">[docs]</a>
    <span class="k">def</span> <span class="nf">addCursor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span><span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cID</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">_Prop</span><span class="p">(</span> <span class="n">_CP</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">pos</span><span class="p">),</span> <span class="n">_CP</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">pos</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checkCursors</span><span class="p">(</span><span class="n">notify</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>


<div class="viewcode-block" id="TTkTextCursor.clearCursors">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.clearCursors">[docs]</a>
    <span class="k">def</span> <span class="nf">clearCursors</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cID</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cID</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="p">]</span></div>


<div class="viewcode-block" id="TTkTextCursor.clearSelection">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.clearSelection">[docs]</a>
    <span class="k">def</span> <span class="nf">clearSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span>
            <span class="n">p</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">line</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">pos</span></div>


<div class="viewcode-block" id="TTkTextCursor.positionChar">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.positionChar">[docs]</a>
    <span class="k">def</span> <span class="nf">positionChar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cID</span><span class="p">:</span><span class="nb">int</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
        <span class="n">cID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cID</span> <span class="k">if</span> <span class="n">cID</span><span class="o">==-</span><span class="mi">1</span> <span class="k">else</span> <span class="n">cID</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="n">cID</span><span class="p">]</span><span class="o">.</span><span class="n">position</span>
        <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">]</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">pos</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">charAt</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ch</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
        <span class="k">return</span> <span class="n">ch</span></div>


<div class="viewcode-block" id="TTkTextCursor.positionColor">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.positionColor">[docs]</a>
    <span class="k">def</span> <span class="nf">positionColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cID</span><span class="p">:</span><span class="nb">int</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TTkColor</span><span class="p">:</span>
        <span class="n">cID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cID</span> <span class="k">if</span> <span class="n">cID</span><span class="o">==-</span><span class="mi">1</span> <span class="k">else</span> <span class="n">cID</span>
        <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="n">cID</span><span class="p">]</span><span class="o">.</span><span class="n">position</span>
        <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">]</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">pos</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">pos</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">):</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">colorAt</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">color</span> <span class="o">=</span> <span class="n">TTkColor</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">color</span></div>


<div class="viewcode-block" id="TTkTextCursor.setPosition">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.setPosition">[docs]</a>
    <span class="k">def</span> <span class="nf">setPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">pos</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">moveMode</span><span class="p">:</span><span class="n">MoveMode</span><span class="o">=</span><span class="n">MoveMode</span><span class="o">.</span><span class="n">MoveAnchor</span><span class="p">,</span> <span class="n">cID</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="n">cID</span><span class="p">]</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">moveMode</span><span class="o">==</span><span class="n">TTkTextCursor</span><span class="o">.</span><span class="n">MoveAnchor</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="n">cID</span><span class="p">]</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">cursorPositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="TTkTextCursor.getLinesUnderCursor">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.getLinesUnderCursor">[docs]</a>
    <span class="k">def</span> <span class="nf">getLinesUnderCursor</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TTkString</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span><span class="p">]</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span> <span class="p">]</span></div>


    <span class="k">def</span> <span class="nf">_checkCursors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">notify</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">currCurs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cID</span><span class="p">]</span>
        <span class="n">currPos</span> <span class="o">=</span> <span class="n">currCurs</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span>
        <span class="c1"># Sort the cursors based on the starting position</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">,</span>
                <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">()</span><span class="o">.</span><span class="n">toNum</span><span class="p">())</span>
        <span class="c1"># remove /merge overlapping cursors</span>
        <span class="n">newProperties</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">np</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span>
            <span class="n">op</span> <span class="o">=</span> <span class="n">newProperties</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">()</span><span class="o">.</span><span class="n">toNum</span><span class="p">():</span>
                <span class="n">newProperties</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="p">)</span>
                <span class="k">continue</span>
            <span class="k">if</span> <span class="n">currCurs</span> <span class="o">==</span> <span class="n">np</span><span class="p">:</span>
                <span class="n">currCurs</span> <span class="o">=</span> <span class="n">op</span>
            <span class="c1"># the two cursors are overlapping</span>
            <span class="c1"># I try to combine the 2 selections</span>
            <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">np</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span><span class="o">.</span><span class="n">toNum</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">op</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span><span class="o">&gt;</span><span class="n">op</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">toNum</span><span class="p">():</span>
                    <span class="n">op</span><span class="o">.</span><span class="n">position</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">op</span><span class="o">.</span><span class="n">anchor</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span> <span class="o">=</span> <span class="n">newProperties</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cID</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">currCurs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">notify</span> <span class="ow">or</span> <span class="n">currPos</span> <span class="o">!=</span> <span class="n">currCurs</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">toNum</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">cursorPositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<div class="viewcode-block" id="TTkTextCursor.movePosition">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.movePosition">[docs]</a>
    <span class="k">def</span> <span class="nf">movePosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">operation</span><span class="p">:</span><span class="n">MoveOperation</span><span class="p">,</span> <span class="n">moveMode</span><span class="p">:</span><span class="n">MoveMode</span><span class="o">=</span><span class="n">MoveMode</span><span class="o">.</span><span class="n">MoveAnchor</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">textWrap</span><span class="p">:</span><span class="n">TTkTextWrap</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">currPos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span>
        <span class="k">def</span> <span class="nf">moveRight</span><span class="p">(</span><span class="n">cID</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">_</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">pos</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">]):</span>
                <span class="n">nextPos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">]</span><span class="o">.</span><span class="n">nextPos</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="n">nextPos</span><span class="p">,</span> <span class="n">moveMode</span><span class="p">,</span> <span class="n">cID</span><span class="o">=</span><span class="n">cID</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p</span><span class="o">.</span><span class="n">line</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">moveMode</span><span class="p">,</span> <span class="n">cID</span><span class="o">=</span><span class="n">cID</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">moveLeft</span><span class="p">(</span><span class="n">cID</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">_</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">pos</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">prevPos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">]</span><span class="o">.</span><span class="n">prevPos</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="n">prevPos</span><span class="p">,</span> <span class="n">moveMode</span><span class="p">,</span> <span class="n">cID</span><span class="o">=</span><span class="n">cID</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">p</span><span class="o">.</span><span class="n">line</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="p">,</span> <span class="n">moveMode</span><span class="p">,</span> <span class="n">cID</span><span class="o">=</span><span class="n">cID</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">moveUpDown</span><span class="p">(</span><span class="n">offset</span><span class="p">):</span>
            <span class="k">def</span> <span class="nf">_moveUpDown</span><span class="p">(</span><span class="n">cID</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">n</span><span class="p">):</span>
                <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span>    <span class="o">=</span> <span class="n">textWrap</span><span class="o">.</span><span class="n">dataToScreenPosition</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="n">p</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
                <span class="n">x</span><span class="p">,</span>  <span class="n">y</span>     <span class="o">=</span> <span class="n">textWrap</span><span class="o">.</span><span class="n">normalizeScreenPosition</span><span class="p">(</span><span class="n">cx</span><span class="p">,</span><span class="n">cy</span><span class="o">+</span><span class="n">offset</span><span class="o">*</span><span class="n">n</span><span class="p">)</span>
                <span class="n">line</span><span class="p">,</span> <span class="n">pos</span> <span class="o">=</span> <span class="n">textWrap</span><span class="o">.</span><span class="n">screenToDataPosition</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">moveMode</span><span class="p">,</span> <span class="n">cID</span><span class="o">=</span><span class="n">cID</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_moveUpDown</span>
        <span class="k">def</span> <span class="nf">moveEndOfLine</span><span class="p">(</span><span class="n">cID</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">_</span><span class="p">):</span>
            <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">),</span> <span class="n">moveMode</span><span class="p">,</span> <span class="n">cID</span><span class="o">=</span><span class="n">cID</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">moveHome</span><span class="p">(</span><span class="n">cID</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">_</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">moveMode</span><span class="p">,</span> <span class="n">cID</span><span class="o">=</span><span class="n">cID</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">moveEnd</span><span class="p">(</span><span class="n">cID</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">_</span><span class="p">):</span>
            <span class="n">l</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">),</span> <span class="n">moveMode</span><span class="p">,</span> <span class="n">cID</span><span class="o">=</span><span class="n">cID</span><span class="p">)</span>

        <span class="n">op</span> <span class="o">=</span> <span class="p">{</span>
                <span class="n">TTkTextCursor</span><span class="o">.</span><span class="n">Right</span> <span class="p">:</span> <span class="n">moveRight</span><span class="p">,</span>
                <span class="n">TTkTextCursor</span><span class="o">.</span><span class="n">Left</span>  <span class="p">:</span> <span class="n">moveLeft</span><span class="p">,</span>
                <span class="n">TTkTextCursor</span><span class="o">.</span><span class="n">Up</span>    <span class="p">:</span> <span class="n">moveUpDown</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span>
                <span class="n">TTkTextCursor</span><span class="o">.</span><span class="n">Down</span>  <span class="p">:</span> <span class="n">moveUpDown</span><span class="p">(</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span>
                <span class="n">TTkTextCursor</span><span class="o">.</span><span class="n">EndOfLine</span>  <span class="p">:</span> <span class="n">moveEndOfLine</span><span class="p">,</span>
                <span class="n">TTkTextCursor</span><span class="o">.</span><span class="n">StartOfLine</span><span class="p">:</span> <span class="n">moveHome</span><span class="p">,</span>
                <span class="n">TTkTextCursor</span><span class="o">.</span><span class="n">End</span><span class="p">:</span> <span class="n">moveEnd</span><span class="p">,</span>
            <span class="p">}</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span><span class="k">lambda</span> <span class="n">_</span><span class="p">:</span><span class="n">_</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
          <span class="k">for</span> <span class="n">cID</span><span class="p">,</span> <span class="n">prop</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">):</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">prop</span><span class="o">.</span><span class="n">position</span>
            <span class="n">op</span><span class="p">(</span><span class="n">cID</span><span class="p">,</span><span class="n">p</span><span class="p">,</span><span class="n">n</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_checkCursors</span><span class="p">(</span><span class="n">notify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span><span class="o">!=</span><span class="n">currPos</span><span class="p">)</span></div>


<div class="viewcode-block" id="TTkTextCursor.document">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.document">[docs]</a>
    <span class="k">def</span> <span class="nf">document</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TTkTextDocument</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span></div>


<div class="viewcode-block" id="TTkTextCursor.replaceText">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.replaceText">[docs]</a>
    <span class="k">def</span> <span class="nf">replaceText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span><span class="n">TTkString</span><span class="p">,</span> <span class="n">moveCursor</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># if there is no selection, just select the next n chars till the end of the line</span>
        <span class="c1"># the newline is not replaced</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_acquire</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">p</span><span class="o">.</span><span class="n">hasSelection</span><span class="p">():</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span>
                <span class="n">pos</span>  <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">lenWoZero</span> <span class="o">=</span> <span class="n">TTkString</span><span class="o">.</span><span class="n">_getLenTextWoZero</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
                <span class="n">size</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">line</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lenWoZero</span><span class="p">):</span>
                    <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">line</span><span class="p">]</span><span class="o">.</span><span class="n">nextPos</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span>
                <span class="n">pos</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">size</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
                <span class="n">p</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="n">pos</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_release</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">insertText</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">moveCursor</span><span class="p">)</span></div>


<div class="viewcode-block" id="TTkTextCursor.insertText">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.insertText">[docs]</a>
    <span class="k">def</span> <span class="nf">insertText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">:</span><span class="n">TTkString</span><span class="p">,</span> <span class="n">moveCursor</span><span class="p">:</span><span class="nb">bool</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_acquire</span><span class="p">()</span>
        <span class="n">_lineFirst</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasSelection</span><span class="p">():</span>
            <span class="n">_lineFirst</span><span class="p">,</span> <span class="n">_lineRem</span><span class="p">,</span> <span class="n">_lineAdd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_removeSelectedText</span><span class="p">()</span>

        <span class="n">lineFirst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span>
        <span class="n">lineRem</span><span class="p">,</span> <span class="n">lineAdd</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>

        <span class="c1"># Check if the number of lines is the same as the number of cursors</span>
        <span class="c1"># this is a corner case where each line belongs to a</span>
        <span class="c1"># different cursor</span>
        <span class="n">textLines</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span> <span class="k">else</span> <span class="p">[</span><span class="n">text</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">textLines</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">):</span>
            <span class="n">textLines</span> <span class="o">=</span> <span class="p">[</span><span class="n">text</span><span class="p">]</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">)</span>

        <span class="c1"># Calc the added and removed lines</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pr</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">):</span>
            <span class="n">lenNewLines</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">textLines</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">))</span>
            <span class="n">l</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">pos</span>
            <span class="k">if</span> <span class="p">(</span>  <span class="n">textLines</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="ow">and</span>
                  <span class="n">l</span> <span class="o">==</span> <span class="n">lineFirst</span> <span class="o">!=</span> <span class="n">_lineFirst</span> <span class="ow">and</span>
                  <span class="n">p</span><span class="o">==</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">l</span><span class="p">])</span> <span class="p">):</span>
                <span class="n">lineFirst</span> <span class="o">=</span> <span class="n">l</span><span class="o">+</span><span class="mi">1</span>
                <span class="n">lineAdd</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">lineRem</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">lineFirst</span> <span class="o">+</span> <span class="n">lineRem</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">l</span><span class="p">:</span>
                <span class="n">lineAdd</span> <span class="o">+=</span> <span class="n">lenNewLines</span><span class="o">-</span><span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">lineAdd</span> <span class="o">+=</span> <span class="n">lenNewLines</span> <span class="o">+</span> <span class="n">l</span><span class="o">-</span><span class="n">lineFirst</span><span class="o">-</span><span class="n">lineRem</span>
                <span class="n">lineRem</span> <span class="o">=</span> <span class="n">l</span> <span class="o">-</span> <span class="n">lineFirst</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">_lineFirst</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">lineFirst</span><span class="p">,</span> <span class="n">lineRem</span><span class="p">,</span> <span class="n">lineAdd</span> <span class="o">=</span> <span class="n">TTkTextDocument</span><span class="o">.</span><span class="n">_mergeChangesSlices</span><span class="p">(</span>
                                                <span class="p">(</span><span class="n">_lineFirst</span><span class="p">,</span> <span class="n">_lineRem</span><span class="p">,</span> <span class="n">_lineAdd</span><span class="p">),</span>
                                                <span class="p">(</span> <span class="n">lineFirst</span><span class="p">,</span>  <span class="n">lineRem</span><span class="p">,</span>  <span class="n">lineAdd</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">pr</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">):</span>
            <span class="n">text</span><span class="o">=</span><span class="n">textLines</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">l</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">pr</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">pos</span>
            <span class="n">color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_color</span> <span class="k">else</span> <span class="bp">self</span><span class="o">.</span><span class="n">positionColor</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>

            <span class="c1"># Use the same color under the cursor if no color is defined:</span>
            <span class="n">ttktext</span> <span class="o">=</span> <span class="n">text</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ttktext</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">ttktext</span> <span class="o">=</span> <span class="n">TTkString</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">color</span><span class="p">)</span>

            <span class="n">newLines</span> <span class="o">=</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="n">p</span><span class="p">)</span> <span class="o">+</span>
                         <span class="n">ttktext</span> <span class="o">+</span>
                         <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">l</span><span class="p">]</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="n">fr</span><span class="o">=</span><span class="n">p</span><span class="p">)</span> <span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">=</span> <span class="n">newLines</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">nl</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">newLines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">l</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">nl</span><span class="p">)</span>

            <span class="c1"># Move/Shift the cursors based on the pasted content</span>
            <span class="c1">#</span>
            <span class="c1"># 2 scenarios:</span>
            <span class="c1">#  1) No Newline(s) added</span>
            <span class="c1">#                p     p+1   p+2</span>
            <span class="c1">#   from:  aaaaaaXaaaaaYaaaaaYaaaa</span>
            <span class="c1">#</span>
            <span class="c1">#   to:    aaaaaaX....aaaaaYaaaaaYaaaa</span>
            <span class="c1">#                     diffPos = len(text)</span>
            <span class="c1">#</span>
            <span class="c1">#  2) Newlines are added</span>
            <span class="c1">#                p     p+1   p+2</span>
            <span class="c1">#   from:  aaaaaaXaaaaaYaaaaaYaaaa</span>
            <span class="c1">#</span>
            <span class="c1">#   to:    aaaaaaX...\n</span>
            <span class="c1">#          ......\n</span>
            <span class="c1">#          \n</span>
            <span class="c1">#          .....aaaaaYaaaaaYaaaa</span>
            <span class="c1">#               diffPos = len(text.split(&#39;\n&#39;)[-1]) - p</span>
            <span class="n">diffLine</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">newLines</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">diffLine</span><span class="p">:</span>
                <span class="n">diffPos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="n">p</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">diffPos</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
            <span class="c1"># Realign all the cursos (move the same if required)</span>
            <span class="k">for</span> <span class="n">pp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="p">(</span><span class="mi">0</span> <span class="k">if</span> <span class="n">moveCursor</span> <span class="k">else</span> <span class="mi">1</span><span class="p">):]:</span>
                <span class="k">if</span> <span class="n">pp</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span> <span class="o">==</span> <span class="n">l</span><span class="p">:</span>
                    <span class="n">pp</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">pos</span>  <span class="o">+=</span> <span class="n">diffPos</span>
                    <span class="n">pp</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">pos</span>  <span class="o">+=</span> <span class="n">diffPos</span>
                <span class="n">pp</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span> <span class="o">+=</span> <span class="n">diffLine</span>
                <span class="n">pp</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">line</span> <span class="o">+=</span> <span class="n">diffLine</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoChanged</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">setChanged</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">contentsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">contentsChange</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">lineFirst</span><span class="p">,</span>  <span class="n">lineRem</span><span class="p">,</span>  <span class="n">lineAdd</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoChanged</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">cursorPositionChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="TTkTextCursor.selectionStart">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.selectionStart">[docs]</a>
    <span class="k">def</span> <span class="nf">selectionStart</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_CP</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cID</span><span class="p">]</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">()</span></div>


<div class="viewcode-block" id="TTkTextCursor.selectionEnd">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.selectionEnd">[docs]</a>
    <span class="k">def</span> <span class="nf">selectionEnd</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">_CP</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_cID</span><span class="p">]</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span></div>


<div class="viewcode-block" id="TTkTextCursor.select">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.select">[docs]</a>
    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">selection</span><span class="p">:</span><span class="n">SelectionType</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">currPos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span>
            <span class="k">if</span>   <span class="n">selection</span> <span class="o">==</span> <span class="n">TTkTextCursor</span><span class="o">.</span><span class="n">SelectionType</span><span class="o">.</span><span class="n">Document</span><span class="p">:</span>
                <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">pos</span>  <span class="o">=</span> <span class="mi">0</span>
                <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">p</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">pos</span>    <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">p</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">line</span>   <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
            <span class="k">elif</span> <span class="n">selection</span> <span class="o">==</span> <span class="n">TTkTextCursor</span><span class="o">.</span><span class="n">SelectionType</span><span class="o">.</span><span class="n">LineUnderCursor</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span>
                <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">p</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">pos</span>   <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">line</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">selection</span> <span class="o">==</span> <span class="n">TTkTextCursor</span><span class="o">.</span><span class="n">SelectionType</span><span class="o">.</span><span class="n">WordUnderCursor</span><span class="p">:</span>
                <span class="n">line</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">line</span>
                <span class="n">pos</span>  <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">pos</span>
                <span class="c1"># Split the current line from the current cursor position</span>
                <span class="c1"># search the leftmost(on the right slice)/rightmost(on the left slice) word</span>
                <span class="c1"># in order to match the full word under the cursor</span>
                <span class="n">splitBefore</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">line</span><span class="p">]</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="n">pos</span><span class="p">)</span>
                <span class="n">splitAfter</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">line</span><span class="p">]</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="n">fr</span><span class="o">=</span><span class="n">pos</span><span class="p">)</span>
                <span class="n">xFrom</span> <span class="o">=</span> <span class="n">pos</span>
                <span class="n">xTo</span>   <span class="o">=</span> <span class="n">pos</span>
                <span class="n">selectRE</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;[^ \t\r\n()[\]\.\,\+\-\*\/]*&#39;</span>
                <span class="k">if</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">splitBefore</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">selectRE</span><span class="o">+</span><span class="s1">&#39;$&#39;</span><span class="p">):</span>
                    <span class="n">xFrom</span> <span class="o">-=</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
                <span class="k">if</span> <span class="n">m</span> <span class="o">:=</span> <span class="n">splitAfter</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s1">&#39;^&#39;</span><span class="o">+</span><span class="n">selectRE</span><span class="p">):</span>
                    <span class="n">xTo</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
                <span class="n">p</span><span class="o">.</span><span class="n">position</span><span class="o">.</span><span class="n">pos</span> <span class="o">=</span> <span class="n">xTo</span>
                <span class="n">p</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">pos</span>   <span class="o">=</span> <span class="n">xFrom</span>
                <span class="n">p</span><span class="o">.</span><span class="n">anchor</span><span class="o">.</span><span class="n">line</span>  <span class="o">=</span> <span class="n">line</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_checkCursors</span><span class="p">(</span><span class="n">notify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span><span class="o">!=</span><span class="n">currPos</span><span class="p">)</span></div>


<div class="viewcode-block" id="TTkTextCursor.selectedText">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.selectedText">[docs]</a>
    <span class="k">def</span> <span class="nf">selectedText</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TTkString</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">_getText</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
            <span class="n">_ret</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">selSt</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">()</span>
            <span class="n">selEn</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">selSt</span><span class="o">.</span><span class="n">line</span><span class="p">,</span><span class="n">selEn</span><span class="o">.</span><span class="n">line</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">l</span><span class="p">]</span>
                <span class="n">pf</span> <span class="o">=</span> <span class="mi">0</span>         <span class="k">if</span> <span class="n">l</span> <span class="o">&gt;</span> <span class="n">selSt</span><span class="o">.</span><span class="n">line</span> <span class="k">else</span> <span class="n">selSt</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">pt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">if</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="n">selEn</span><span class="o">.</span><span class="n">line</span> <span class="k">else</span> <span class="n">selEn</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">_ret</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="n">pf</span><span class="p">,</span> <span class="n">pt</span><span class="p">))</span>
            <span class="k">return</span> <span class="n">_ret</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span>
            <span class="n">ret</span> <span class="o">+=</span> <span class="n">_getText</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">TTkString</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ret</span><span class="p">)</span></div>


<div class="viewcode-block" id="TTkTextCursor.hasSelection">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.hasSelection">[docs]</a>
    <span class="k">def</span> <span class="nf">hasSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">hasSelection</span><span class="p">():</span>
                <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span></div>


    <span class="k">def</span> <span class="nf">_removeSelectedText</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">currPos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span>

        <span class="n">lineFirst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">()</span><span class="o">.</span><span class="n">line</span>
        <span class="n">lineAdd</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">lineRem</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span>
            <span class="c1"># Check how many lines are removed/added after this operation</span>
            <span class="n">selSt</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">()</span>
            <span class="n">selEn</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">lineFirst</span> <span class="o">+</span> <span class="n">lineRem</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">selSt</span><span class="o">.</span><span class="n">line</span><span class="p">:</span>
                <span class="n">_lineAdd</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">_lineAdd</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="n">selSt</span><span class="o">.</span><span class="n">pos</span> <span class="o">==</span> <span class="n">selEn</span><span class="o">.</span><span class="n">pos</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="mi">1</span>

            <span class="n">lineAdd</span> <span class="o">+=</span> <span class="n">selSt</span><span class="o">.</span><span class="n">line</span> <span class="o">-</span> <span class="n">lineFirst</span> <span class="o">-</span> <span class="n">lineRem</span> <span class="o">+</span> <span class="n">_lineAdd</span>
            <span class="n">lineRem</span> <span class="o">=</span> <span class="n">selEn</span><span class="o">.</span><span class="n">line</span> <span class="o">-</span> <span class="n">lineFirst</span> <span class="o">+</span> <span class="n">_lineAdd</span>

        <span class="k">def</span> <span class="nf">_alignPoint</span><span class="p">(</span><span class="n">point</span><span class="p">,</span><span class="n">st</span><span class="p">,</span><span class="n">en</span><span class="p">):</span>
            <span class="n">point</span><span class="o">.</span><span class="n">line</span> <span class="o">+=</span> <span class="n">st</span><span class="o">.</span><span class="n">line</span> <span class="o">-</span> <span class="n">en</span><span class="o">.</span><span class="n">line</span>
            <span class="k">if</span> <span class="n">point</span><span class="o">.</span><span class="n">line</span> <span class="o">==</span> <span class="n">st</span><span class="o">.</span><span class="n">line</span><span class="p">:</span>
                <span class="n">point</span><span class="o">.</span><span class="n">pos</span> <span class="o">+=</span> <span class="n">st</span><span class="o">.</span><span class="n">pos</span> <span class="o">-</span> <span class="n">en</span><span class="o">.</span><span class="n">pos</span>

        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">):</span>
            <span class="n">selSt</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">()</span>
            <span class="n">selEn</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">selSt</span><span class="o">.</span><span class="n">line</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">selSt</span><span class="o">.</span><span class="n">line</span><span class="p">]</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="n">selSt</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span> <span class="o">+</span> \
                               <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">selEn</span><span class="o">.</span><span class="n">line</span><span class="p">]</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="n">fr</span><span class="o">=</span><span class="n">selEn</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[:</span><span class="n">selSt</span><span class="o">.</span><span class="n">line</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">selEn</span><span class="o">.</span><span class="n">line</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
            <span class="k">for</span> <span class="n">pp</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]:</span>
                <span class="n">_alignPoint</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">position</span><span class="p">,</span> <span class="n">selSt</span><span class="p">,</span> <span class="n">selEn</span><span class="p">)</span>
                <span class="n">_alignPoint</span><span class="p">(</span><span class="n">pp</span><span class="o">.</span><span class="n">anchor</span><span class="p">,</span>   <span class="n">selSt</span><span class="p">,</span> <span class="n">selEn</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setPosition</span><span class="p">(</span><span class="n">selSt</span><span class="o">.</span><span class="n">line</span><span class="p">,</span> <span class="n">selSt</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">cID</span><span class="o">=</span><span class="n">i</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_checkCursors</span><span class="p">(</span><span class="n">notify</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">()</span><span class="o">.</span><span class="n">toNum</span><span class="p">()</span><span class="o">!=</span><span class="n">currPos</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">lineFirst</span><span class="p">,</span> <span class="n">lineRem</span><span class="p">,</span> <span class="n">lineAdd</span>

<div class="viewcode-block" id="TTkTextCursor.removeSelectedText">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.removeSelectedText">[docs]</a>
    <span class="k">def</span> <span class="nf">removeSelectedText</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasSelection</span><span class="p">():</span> <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_acquire</span><span class="p">()</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_removeSelectedText</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoChanged</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">setChanged</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">contentsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">contentsChange</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoChanged</span> <span class="o">=</span> <span class="kc">False</span></div>


<div class="viewcode-block" id="TTkTextCursor.applyColor">
<a class="viewcode-back" href="../../../_autosummary/TermTk.TTkGui.TTkTextCursor.html#TermTk.TTkGui.TTkTextCursor.applyColor">[docs]</a>
    <span class="k">def</span> <span class="nf">applyColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span><span class="n">TTkColor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_acquire</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span>
            <span class="n">selSt</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">()</span>
            <span class="n">selEn</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">selSt</span><span class="o">.</span><span class="n">line</span><span class="p">,</span><span class="n">selEn</span><span class="o">.</span><span class="n">line</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">l</span><span class="p">]</span>
                <span class="n">pf</span> <span class="o">=</span> <span class="mi">0</span>         <span class="k">if</span> <span class="n">l</span> <span class="o">&gt;</span> <span class="n">selSt</span><span class="o">.</span><span class="n">line</span> <span class="k">else</span> <span class="n">selSt</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">pt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="k">if</span> <span class="n">l</span> <span class="o">&lt;</span> <span class="n">selEn</span><span class="o">.</span><span class="n">line</span> <span class="k">else</span> <span class="n">selEn</span><span class="o">.</span><span class="n">pos</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_dataLines</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">posFrom</span><span class="o">=</span><span class="n">pf</span><span class="p">,</span> <span class="n">posTo</span><span class="o">=</span><span class="n">pt</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoChanged</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">setChanged</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">_release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_document</span><span class="o">.</span><span class="n">contentsChanged</span><span class="o">.</span><span class="n">emit</span><span class="p">()</span>
        <span class="c1"># self._document.contentsChange.emit(0,0,0)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_autoChanged</span> <span class="o">=</span> <span class="kc">True</span></div>


    <span class="k">def</span> <span class="nf">_getCoveredLines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fr</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">to</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">lines</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="n">TTkColor</span><span class="p">],</span> <span class="n">color</span><span class="p">:</span><span class="n">TTkColor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TTkColor</span><span class="p">]:</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span>
            <span class="n">selSt</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">()</span><span class="o">.</span><span class="n">line</span>
            <span class="n">selEn</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span><span class="o">.</span><span class="n">line</span>
            <span class="k">if</span> <span class="n">selEn</span> <span class="o">&gt;=</span> <span class="n">fr</span> <span class="ow">and</span> <span class="n">selSt</span><span class="o">&lt;=</span><span class="n">to</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">selSt</span><span class="p">,</span><span class="n">fr</span><span class="p">),</span><span class="nb">min</span><span class="p">(</span><span class="n">selEn</span><span class="p">,</span><span class="n">to</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
                    <span class="n">lines</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">fr</span><span class="p">]</span> <span class="o">=</span> <span class="n">color</span>
        <span class="k">return</span> <span class="n">lines</span>

    <span class="k">def</span> <span class="nf">_getBlinkingCursors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fr</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">to</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span><span class="n">TTkColor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TTkString</span><span class="p">]:</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">lines</span>
        <span class="c1"># Add Blinking cursor</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">)</span><span class="o">&gt;</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span>
                <span class="n">cp</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">position</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="p">(</span><span class="n">cp</span><span class="o">.</span><span class="n">line</span><span class="o">-</span><span class="n">fr</span><span class="p">)</span><span class="o">&lt;</span><span class="nb">len</span><span class="p">(</span><span class="n">ret</span><span class="p">):</span> <span class="k">continue</span>
                <span class="n">ret</span><span class="p">[</span><span class="n">cp</span><span class="o">.</span><span class="n">line</span><span class="o">-</span><span class="n">fr</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="n">cp</span><span class="o">.</span><span class="n">line</span><span class="o">-</span><span class="n">fr</span><span class="p">]</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="o">+</span><span class="n">TTkColor</span><span class="o">.</span><span class="n">BLINKING</span><span class="p">,</span> <span class="n">posFrom</span><span class="o">=</span><span class="n">cp</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">posTo</span><span class="o">=</span><span class="n">cp</span><span class="o">.</span><span class="n">pos</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">cp</span><span class="o">.</span><span class="n">pos</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">ret</span><span class="p">[</span><span class="n">cp</span><span class="o">.</span><span class="n">line</span><span class="o">-</span><span class="n">fr</span><span class="p">]):</span>
                   <span class="n">ret</span><span class="p">[</span><span class="n">cp</span><span class="o">.</span><span class="n">line</span><span class="o">-</span><span class="n">fr</span><span class="p">]</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="n">cp</span><span class="o">.</span><span class="n">line</span><span class="o">-</span><span class="n">fr</span><span class="p">]</span><span class="o">+</span><span class="n">TTkString</span><span class="p">(</span><span class="s1">&#39;â†µ&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">+</span><span class="n">TTkColor</span><span class="o">.</span><span class="n">BLINKING</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">ret</span><span class="p">[</span><span class="n">cp</span><span class="o">.</span><span class="n">line</span><span class="o">-</span><span class="n">fr</span><span class="p">]</span><span class="o">.</span><span class="n">charAt</span><span class="p">(</span><span class="n">cp</span><span class="o">.</span><span class="n">pos</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39; &#39;</span><span class="p">:</span>
                    <span class="n">ret</span><span class="p">[</span><span class="n">cp</span><span class="o">.</span><span class="n">line</span><span class="o">-</span><span class="n">fr</span><span class="p">]</span><span class="o">.</span><span class="n">setCharAt</span><span class="p">(</span><span class="n">pos</span><span class="o">=</span><span class="n">cp</span><span class="o">.</span><span class="n">pos</span><span class="p">,</span> <span class="n">char</span><span class="o">=</span><span class="s1">&#39;âˆ™&#39;</span><span class="p">)</span>
                    <span class="c1"># ret[p.line-fr].setColorAt(pos=p.pos, color=TTkCfg.theme.treeLineColor+TTkColor.BLINKING)</span>
                <span class="c1">#elif ret[p.line-fr].charAt(p.pos) == &#39;\t&#39;:</span>
                <span class="c1">#    ret[p.line-fr].setCharAt(pos=p.pos, char=&#39;\t&#39;)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">_getHighlightedLines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fr</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">to</span><span class="p">:</span><span class="nb">int</span><span class="p">,</span> <span class="n">lines</span><span class="p">,</span> <span class="n">color</span><span class="p">:</span><span class="n">TTkColor</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">list</span><span class="p">[</span><span class="n">TTkString</span><span class="p">]:</span>
        <span class="c1"># Create a list of cursors (filtering out the ones which</span>
        <span class="c1"># position/selection is outside the screen boundaries)</span>
        <span class="n">sel</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_properties</span><span class="p">:</span>
            <span class="n">selSt</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionStart</span><span class="p">()</span>
            <span class="n">selEn</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">selectionEnd</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">selEn</span><span class="o">.</span><span class="n">line</span> <span class="o">&gt;=</span> <span class="n">fr</span> <span class="ow">and</span> <span class="n">selSt</span><span class="o">.</span><span class="n">line</span><span class="o">&lt;=</span><span class="n">to</span><span class="p">:</span>
                <span class="n">sel</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">selSt</span><span class="p">,</span><span class="n">selEn</span><span class="p">,</span><span class="n">p</span><span class="p">))</span>

        <span class="c1"># Retrieve the sublist of lines to be required (displayed)</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">lines</span>
        <span class="c1"># Apply the selection color for each of them</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">sel</span><span class="p">:</span>
            <span class="n">selSt</span><span class="p">,</span> <span class="n">selEn</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">s</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">selSt</span><span class="o">.</span><span class="n">line</span><span class="p">,</span><span class="n">fr</span><span class="p">),</span><span class="nb">min</span><span class="p">(</span><span class="n">selEn</span><span class="o">.</span><span class="n">line</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">to</span><span class="o">+</span><span class="mi">1</span><span class="p">)):</span>
                <span class="n">l</span> <span class="o">=</span> <span class="n">ret</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">fr</span><span class="p">]</span>
                <span class="n">pf</span> <span class="o">=</span> <span class="mi">0</span>      <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="n">selSt</span><span class="o">.</span><span class="n">line</span> <span class="k">else</span> <span class="n">selSt</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">pt</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">selEn</span><span class="o">.</span><span class="n">line</span> <span class="k">else</span> <span class="n">selEn</span><span class="o">.</span><span class="n">pos</span>
                <span class="n">ret</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">fr</span><span class="p">]</span> <span class="o">=</span> <span class="n">l</span><span class="o">.</span><span class="n">setColor</span><span class="p">(</span><span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="n">posFrom</span><span class="o">=</span><span class="n">pf</span><span class="p">,</span> <span class="n">posTo</span><span class="o">=</span><span class="n">pt</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span></div>

</pre></div>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Eugenio Parodi
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2021, Eugenio Parodi.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>